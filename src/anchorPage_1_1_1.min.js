/**
 *AnchorPageJS Version 1.1.1
 *Author: HerrMutig
 *License: MIT
 */
(function($){$.fn.anchorPage=function(options){var settings=$.extend({startMargin:150,endMargin:150,duration:2000,waitingtime:200,easing:"swing"},options);var posObjArr=[];var currentPos;var maxPos;var minPos;var lockAnimation;var movedByWheel;var lastMouseScroll;var touchScreenStartYPos;var touchScreenEndYPos;var movedByTouch;var touchDirection;posObjArr=$(this).length>0?$(this):null;maxPos=posObjArr.length-1;minPos=0;lockAnimation=!1;function animateOnComplete(){setTimeout(function(){lockAnimation=!1},settings.waitingtime)}
function animateOnStart(){lockAnimation=!0}
function animateWindow(position){$("html, body").animate({scrollTop:position},{start:animateOnStart,complete:animateOnComplete,duration:settings.duration,easing:settings.easing})}
function allowMoving(event){if(movedByWheel){if(minPos===getCurrentPosition()&&getScrollDirection(event)==="up"||maxPos===getCurrentPosition()&&getScrollDirection(event)==="down"){return!0}
if($(window).scrollTop()>posObjArr[maxPos].offsetTop+settings.endMargin&&getScrollDirection(event)==="up"){return!0}
if($(window).scrollTop()<posObjArr[minPos].offsetTop-settings.startMargin&&getScrollDirection(event)==="down"){return!0}}
if(movedByTouch){if(minPos===getCurrentPosition()&&getTouchDirection()==="down"||maxPos===getCurrentPosition()&&getTouchDirection(event)==="up"){return!0}
if($(window).scrollTop()<posObjArr[minPos].offsetTop-settings.startMargin&&getTouchDirection(event)==="up"){return!0}
if($(window).scrollTop()>posObjArr[maxPos].offsetTop+settings.endMargin&&getTouchDirection(event)==="down"){return!0}}
return!1}
function scrollToAnchor(restriction){if(lockAnimation===!0)
return;var scrollToAnchor=getCurrentPosition();if(restriction==="next"){if($(window).scrollTop()<posObjArr[minPos].offsetTop){scrollToAnchor=getCurrentPosition()-1}
animateWindow(posObjArr[scrollToAnchor+1].offsetTop)}else if(restriction==="prev"){if($(window).scrollTop()>posObjArr[maxPos].offsetTop){scrollToAnchor=getCurrentPosition()+1}
animateWindow(posObjArr[scrollToAnchor-1].offsetTop)}
return!1}
function getCurrentPosition(){currentPos=0;for(var i=0;i<posObjArr.length;i++){if($(window).scrollTop()>=posObjArr[i].offsetTop){currentPos=i}}
return currentPos}
function getScrollDirection(event){if(event.originalEvent.deltaY===undefined){return lastMouseScroll}else if(event.originalEvent.deltaY<0){lastMouseScroll="up";return lastMouseScroll}else if(event.originalEvent.deltaY>0){lastMouseScroll="down";return lastMouseScroll}}
function blockExceededMouseScrolling(event){if(!allowMoving(event)&&lockAnimation===!1){if(getCurrentPosition()===minPos){$(window).scrollTop(posObjArr[minPos].offsetTop-settings.startMargin)}else if(getCurrentPosition()===maxPos){$(window).scrollTop(posObjArr[maxPos].offsetTop+settings.endMargin)}}}
function blockExceededTouchScrolling(event){if(!allowMoving(event)&&lockAnimation===!1){if(getCurrentPosition()===minPos){$(window).scrollTop(posObjArr[minPos].offsetTop-settings.startMargin)}else if(getCurrentPosition()===maxPos){$(window).scrollTop(posObjArr[maxPos].offsetTop+settings.endMargin)}}}
function setTouchDirection(){if(touchScreenStartYPos>touchScreenEndYPos){touchDirection="up"}else if(touchScreenStartYPos<touchScreenEndYPos){touchDirection="down"}}
function getTouchDirection(deletion){var temp=touchDirection!==undefined?touchDirection:null;if(deletion===!0)
{touchDirection=null}
return temp}
function EventScrollToSection(event){movedByWheel=!0;movedByTouch=!1;if(allowMoving(event)){return}
event.preventDefault();if(getScrollDirection(event)==="up"){scrollToAnchor("prev")}else if(getScrollDirection(event)==="down"){scrollToAnchor("next")}}
function EventScrollBlock(event){blockExceededMouseScrolling(event)}
function EventTouchStart(event){touchScreenStartYPos=event.touches[0].screenY;movedByWheel=!1;movedByTouch=!0}
function EventTouchMove(event){if(!allowMoving(event)){event.preventDefault()}
touchScreenEndYPos=event.touches[0].screenY;setTouchDirection()}
function EventTouchToSection(event){if(allowMoving(event)){getTouchDirection();return}
if(getTouchDirection()==="down"){scrollToAnchor("prev")}else if(getTouchDirection()==="up"){scrollToAnchor("next")}
getTouchDirection(!0)}
$(window).on("wheel",EventScrollToSection);$(window).on("scroll",EventScrollBlock);window.addEventListener("touchstart",EventTouchStart);window.addEventListener("touchmove",EventTouchMove,{passive:!1,cancelable:!0,cancelBubble:!0});window.addEventListener("touchend",EventTouchToSection)}}(jQuery));
