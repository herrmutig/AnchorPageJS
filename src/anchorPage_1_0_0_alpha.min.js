/**
*AnchorPageJS Version 1.0.0 Alpha
*Author: HerrMutig
*License: MIT
*/
(function($){$.fn.anchorPage=function(options){var settings=$.extend({startMargin:150,endMargin:150,duration:2000,waitingtime:200,easing:"swing"},options);var posObjArr=[];var lastMouseScroll;var currentPos;var maxPos;var minPos;var lockAnimation;var wasScrollFired;posObjArr=$(this).length>0?$(this):null;maxPos=posObjArr.length-1;minPos=0;lockAnimation=!1;function getScrollDirection(event){if(event.originalEvent.deltaY===undefined){return lastMouseScroll}else if(event.originalEvent.deltaY<0){lastMouseScroll="up";return lastMouseScroll}else if(event.originalEvent.deltaY>0){lastMouseScroll="down";return lastMouseScroll}}
function getCurrentPosition(){currentPos=0;for(var i=0;i<posObjArr.length;i++){if($(window).scrollTop()>=posObjArr[i].offsetTop){currentPos=i}}
return currentPos}
function allowScrolling(event){if(minPos===getCurrentPosition()&&getScrollDirection(event)==="up"||maxPos===getCurrentPosition()&&getScrollDirection(event)==="down"){return!0}
if($(window).scrollTop()>=posObjArr[maxPos].offsetTop+settings.endMargin&&getScrollDirection(event)==="up"){return!0}
if($(window).scrollTop()<=posObjArr[minPos].offsetTop-settings.startMargin&&getScrollDirection(event)==="down"){return!0}
return!1}
function animateWindow(position){$("html, body").animate({scrollTop:position},{start:animateOnStart,complete:animateOnComplete,duration:settings.duration,easing:settings.easing})}
function scrollToAnchor(restriction){if(lockAnimation===!0)
return;var scrollToAnchor=getCurrentPosition();if(restriction==="next"){if($(window).scrollTop()<posObjArr[minPos].offsetTop)
{scrollToAnchor=getCurrentPosition()-1}
animateWindow(posObjArr[scrollToAnchor+1].offsetTop)}else if(restriction==="prev"){if($(window).scrollTop()>posObjArr[maxPos].offsetTop)
{scrollToAnchor=getCurrentPosition()+1}
animateWindow(posObjArr[scrollToAnchor-1].offsetTop)}
return!1}
function animateOnComplete(){setTimeout(function(){lockAnimation=!1},settings.waitingtime)}
function animateOnStart(){lockAnimation=!0}
function EventScrollToSection(e){if(allowScrolling(e)){return}
e.preventDefault();if(getScrollDirection(e)==="up"){scrollToAnchor("prev")}else if(getScrollDirection(e)==="down"){scrollToAnchor("next")}}
function EventScrollBlock(e){{if(!allowScrolling(e)&&wasScrollFired===!1){if(getCurrentPosition()===minPos){$(window).scrollTop(posObjArr[minPos].offsetTop-settings.startMargin)}else if(getCurrentPosition()===maxPos){$(window).scrollTop(posObjArr[maxPos].offsetTop+settings.endMargin)}
wasScrollFired=!0}else if(allowScrolling(e)){wasScrollFired=!1}}}
$(window).on("wheel",EventScrollToSection);$(window).on("scroll",EventScrollBlock)}}(jQuery))
